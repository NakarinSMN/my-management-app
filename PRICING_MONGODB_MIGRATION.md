# üîÑ ‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÑ‡∏õ‡∏¢‡∏±‡∏á MongoDB

## üìã ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

### **1. ‡∏™‡∏£‡πâ‡∏≤‡∏á API Route ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Services**

#### **‡πÑ‡∏ü‡∏•‡πå: `src/app/api/services/route.ts`**
```typescript
import { NextResponse, NextRequest } from 'next/server';
import { getDatabase } from '@/lib/mongodb';

// GET: ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
export async function GET() {
  try {
    const db = await getDatabase();
    const services = db.collection('services');
    const allServices = await services.find({}).toArray();
    
    return NextResponse.json({ 
      success: true, 
      data: allServices,
      count: allServices.length
    });
  } catch (error) {
    return NextResponse.json(
      { success: false, error: 'Failed to fetch services' },
      { status: 500 }
    );
  }
}

// POST: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà
export async function POST(request: NextRequest) {
  // ... implementation
}

// PUT: ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
export async function PUT(request: NextRequest) {
  // ... implementation
}

// DELETE: ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
export async function DELETE(request: NextRequest) {
  // ... implementation
}
```

### **2. ‡∏™‡∏£‡πâ‡∏≤‡∏á Custom Hook ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Services**

#### **‡πÑ‡∏ü‡∏•‡πå: `src/lib/useServiceData.ts`**
```typescript
import { useState, useEffect } from 'react';

export interface ServiceData {
  _id: string;
  categoryName: string;
  categoryDescription: string;
  serviceName: string;
  servicePrice: number;
  serviceDetails: string;
  createdAt: string;
  updatedAt: string;
}

export interface ServiceCategory {
  name: string;
  description: string;
  services: ServiceData[];
}

interface UseServiceDataReturn {
  data: ServiceCategory[];
  rawData: ServiceData[];
  error: string | null;
  isLoading: boolean;
  refreshData: () => Promise<void>;
  addService: (serviceData: Partial<ServiceData>) => Promise<boolean>;
  updateService: (id: string, serviceData: Partial<ServiceData>) => Promise<boolean>;
  deleteService: (id: string) => Promise<boolean>;
}

export function useServiceData(): UseServiceDataReturn {
  // ... implementation
}
```

### **3. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏ô‡πâ‡∏≤ Pricing**

#### **‡πÄ‡∏î‡∏¥‡∏° (‡πÉ‡∏ä‡πâ Google Sheets)**
```typescript
import useSWR from 'swr';

const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/...';

const { data: swrData, error: swrError, isLoading: swrIsLoading, mutate } = useSWR(GOOGLE_SCRIPT_URL, fetcher, {
  revalidateOnFocus: false,
  revalidateOnReconnect: false,
});
```

#### **‡πÉ‡∏´‡∏°‡πà (‡πÉ‡∏ä‡πâ MongoDB)**
```typescript
import { useServiceData, ServiceData, ServiceCategory } from '@/lib/useServiceData';

const { data: serviceCategories, error, isLoading, refreshData, addService, updateService, deleteService } = useServiceData();
```

## üéØ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå

### ‚úÖ **‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß**
- **API Route** ‚Üí `/api/services` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö CRUD operations
- **Custom Hook** ‚Üí `useServiceData` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **‡∏´‡∏ô‡πâ‡∏≤ Pricing** ‚Üí ‡πÉ‡∏ä‡πâ MongoDB ‡πÅ‡∏ó‡∏ô Google Sheets
- **Real-time Data** ‚Üí ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

### üîß **Features ‡πÉ‡∏´‡∏°‡πà**
- **MongoDB Integration** ‚Üí ‡πÉ‡∏ä‡πâ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• MongoDB
- **CRUD Operations** ‚Üí ‡πÄ‡∏û‡∏¥‡πà‡∏°, ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç, ‡∏•‡∏ö, ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **Real-time Sync** ‚Üí ‡∏ã‡∏¥‡∏á‡∏Ñ‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- **Error Handling** ‚Üí ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î

### üìä **‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö**

#### **‡πÄ‡∏î‡∏¥‡∏°**
- ‡πÉ‡∏ä‡πâ Google Sheets API
- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà real-time
- ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ SWR
- ‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö Google Script

#### **‡πÉ‡∏´‡∏°‡πà**
- ‡πÉ‡∏ä‡πâ MongoDB
- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• real-time
- ‡πÉ‡∏ä‡πâ custom hook
- ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà

### üóÑÔ∏è **‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• MongoDB**

#### **Collection: `services`**
```json
{
  "_id": "ObjectId",
  "categoryName": "‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£",
  "categoryDescription": "‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà",
  "serviceName": "‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£",
  "servicePrice": 1000,
  "serviceDetails": "‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£",
  "createdAt": "2025-01-27T00:00:00.000Z",
  "updatedAt": "2025-01-27T00:00:00.000Z"
}
```

### üöÄ **API Endpoints**

#### **GET `/api/services`**
- ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- Response: `{ success: true, data: [...], count: number }`

#### **POST `/api/services`**
- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà
- Body: `{ categoryName, serviceName, servicePrice, ... }`

#### **PUT `/api/services`**
- ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
- Body: `{ _id, categoryName, serviceName, servicePrice, ... }`

#### **DELETE `/api/services`**
- ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
- Body: `{ _id }`

## üöÄ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô!

‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏´‡∏ô‡πâ‡∏≤ "‡∏£‡∏≤‡∏Ñ‡∏≤‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£" ‡πÉ‡∏ä‡πâ MongoDB ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö!

- ‚úÖ **MongoDB Integration** ‚Üí ‡πÉ‡∏ä‡πâ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• MongoDB
- ‚úÖ **Real-time Data** ‚Üí ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‚úÖ **CRUD Operations** ‚Üí ‡πÄ‡∏û‡∏¥‡πà‡∏°, ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç, ‡∏•‡∏ö, ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- ‚úÖ **Better Performance** ‚Üí ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô

üéØ **Perfect MongoDB migration!** üîÑüìäüì±‚ö°üîçüë•üöó
